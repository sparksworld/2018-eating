<style>
    .todayStar {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        text-align: center;
        /*  padding-bottom: 1.75rem; */
    }

    .todayStar .flexbox {
        -ms-flex: 1 1 auto;
        flex: 1 1 auto;
        -webkit-box-flex: 1;
        -ms-flex-positive: 1;
        flex-grow: 1;
        -ms-flex-negative: 1;
        flex-shrink: 1;
        -ms-flex-preferred-size: 0;
        flex-basis: 0;
        margin-top: 1.375rem;
        overflow: hidden;
        padding: 0 .625rem;
        box-sizing: border-box;
    }

    .todayStar .imgbox {
        width: 3.4375rem;
        height: 3.4375rem;
        border-radius: 50%;
        background: url({MODULE_URL}static/img/headerimg.png) 0 0 no-repeat #EEE;
        background-size: 100% auto;
        margin: 0 auto;
    }

    .todayStar .name {
        font-size: .75rem;
        line-height: 1.03125rem;
        color: #666;
        margin-top: .3125rem;
        height: 1.03125rem;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .todayStar .time {
        font-size: .875rem;
        line-height: 1.25rem;
        color: #FF801A;
        margin-top: .0625rem;
        font-weight: 500;
    }

    .todayStar .label {
        width: 5.0625rem;
        height: 1.8125rem;
        margin: 0 auto;
        margin-top: -1.25rem;
        font-size: .6875rem;
        padding-top: .5rem;
        line-height: 1.25rem;
        padding-right: .625rem;
        box-sizing: border-box;
        color: #FFF;
        font-weight: 500;
        text-align: right;
    }

    .todayStar .label1 {
        width: 5.0625rem;
        height: 1.8125rem;
        background: url({MODULE_URL}static/img/label1.png) 0 0 no-repeat;
        background-size: contain;
    }

    .todayStar .label3 {
        width: 5.0625rem;
        height: 1.8125rem;
        background: url({MODULE_URL}static/img/label3.png) 0 0 no-repeat;
        background-size: contain;
    }

    .icon_notice {
        display: inline-block;
        vertical-align: -.3em;
        width: 1.4em;
        height: 1.4em;
        margin-right: .6em;
        background: url(data:image/png;base64,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)no-repeat 50%/100% 100%;
    }

    .notice {
        /* position: absolute; */
        /* top: 0; */
        /* left: 0; */
        /* height: 1.6em; */
        position: relative;
        width: 100%;
        height: 2em;
        background: rgb(240, 115, 13);
        overflow: hidden;
    }

    .notice .inform {
        position: absolute;
        left: 0;
        line-height: 2em;
        font-size: 1em;
        /* transform: translate(80%); */
        /* animation: informs 8s 0s linear infinite; */
        white-space: nowrap;
        color: #fff;
    }

    .notice .inform::after {
        content: " ";
        display: inline-block;
        margin: 0 0 0 .4em;
        width: .5em;
        height: .5em;
        border-top: 1px solid #fff;
        border-right: 1px solid #fff;
        transform: rotate(45deg);
        -webkit-transform: rotate(45deg);
    }

    .layer_left {
        text-align: left;
    }

    .layer_strong {
        font-weight: bold;
        font-size: 1.2em;
    }

    .layer_content {
        height: 50vh;
        overflow: scroll;
    }
</style>
<script type="text/x-template" id='bottom'>
    <div>
        <div class="notice" @click="showNotice">
            <span class="inform"><i class="icon_notice"></i>{{informContent.title}}</span>
        </div>
        <index-top></index-top>

        <div v-if="star" class="todayStar">
            <div v-if="star.zaoqi" class="flexbox">
                <p class="imgbox" :style="'background: url('+star.zaoqi.fans.headimgurl+') 0 0 no-repeat; background-size:cover;'"></p>
                <p class="label label1">早起之星</p>
                <p class="name">{{star.zaoqi.fans.nickname}}</p>
                <p class="time">{{star.zaoqi.checked_time}}打卡</p>
            </div>
            <div v-if="star.lianxu" class="flexbox">
                <p class="imgbox" :style="'background: url('+star.lianxu.fans.headimgurl+') 0 0 no-repeat; background-size:cover;'"></p>
                <p class="label label3">毅力之星</p>
                <p class="name">{{star.lianxu.fans.nickname}}</p>
                <p class="time">连续{{star.lianxu.lianxu}}次</p>
            </div>
        </div>
        {if $config['ad_imgurl']}
        <div style="padding:15px;" class='ad'>
            {if $config['ad_url']}
            <a href="{$config['ad_url']}"><img style="width:100%" src="{$config['ad_imgurl']}"></a>
            {else}
            <a><img style="width:100%" src="{$config['ad_imgurl']}"></a>
            {/if}
        </div>
        {/if}
        
        <div v-if="dakalist.length>0" class="weui-panel weui-panel_access">
            <div class="weui-panel__hd">打卡用户列表</div>
            <div class="weui-panel__bd">
                <template v-for="item in dakalist">
                    <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
                        <div class="weui-media-box__hd">
                            <img style="border-radius:100%;" class="weui-media-box__thumb" :src="item.headimgurl" alt="">
                        </div>
                        <div class="weui-media-box__bd">
                            <h4 class="weui-media-box__title">{{item.nickname}}</h4>
                            <p class="weui-media-box__desc">
                                {{item.checked_time?'打卡时间:'+item.checked_time:''}}<br>
                                已连续打卡<span style='color:#1cc721'>{{item.lianxu}}</span>天 累计奖励金<span style='color:#1cc721'>{{item.allmoney}}</span>元
                            </p>
                        </div>
                    </a>
                </template>
            </div>
            <div v-if="showmore" class="weui-panel__ft">
                <a @click="getmore" class="weui-cell weui-cell_access weui-cell_link">
                    <div class="weui-cell__bd">查看更多</div>
                    <span class="weui-cell__ft"></span>
                </a>    
            </div>
        </div>
    </div>
</script>
<?php if($isDay){ ?> {template 'index/index-top2'}
<?php }else{ ?> {template 'index/index-top3'}
<?php } ?>
<script>
    var indexBottom = Vue.component('index-bottom', {
        template: '#bottom',
        data: function () {
            return {
                msg: 'hello',
                dakalist: [],
                page: 1,
                showmore: false,
                star: [],
                informContent: {
                    title: '公告：系统今日(1月18号)已更新，请点击查看！',
                    inner: `
                <div class="layer_content">
                    <p class="layer_strong">感谢大家对蜜蜂早起的信任和支持，系统今日进行了如下更新：<p>
                    <p class="layer_left">1、今日起大家只用支付一次，只要连续打卡，就可以每天分钱，不用再每天付钱报名，如果中断的话才需要另外支付报名；<p>
                    <p class="layer_left">2、今日起全面启动10元挑战；</p>
                    <p class="layer_left">3、每天打卡成功后分的钱会在当天自动发放到余额，可提现金额达到1元即可提现；</p>
                    <p class="layer_left">4、每月连续打卡21天，系统会自动随机奖励1-10元；</p>
                    <p class="layer_left">5、为了更有趣味性，随机分钱和邀请奖励的功能正在开发，近期会上线；</p>
                    <p class="layer_left">6、支付的挑战金打卡满60天后，可联系客服办理退款。</p>
                    <p class="layer_left">5、为了更有趣味性，随机分钱和邀请奖励的功能正在开发，近期会上线；</p>
                    由于近期开发功能较多，如果遇到问题，请不要着急，联系客服即可，我们会及时处理，感谢大家对早起平台的支持和信任！
                    </div>`
                }
            }
        },
        created: function () {
            this.init();
        },
        beforeDestroy: function () {
        },
        computed: {
        },
        methods: {
            showNotice() {
                // this.isShowNotice = true
                var _this = this
                layer.open({
                    anim: 'up',
                    title: false,
                    content: _this.informContent.inner,
                    btn: ['确认'],
                    scrollbar: false
                });
            },
            init: function () {
                this.getmore();
                this.getstar();
            },
            getstar: function () {
                var self = this;
                http({
                    url: baseUrl + 'getstar'
                }).then(function (res) {
                    res = res.data;
                    if (res.ret == 0) {
                        self.star = res.data;
                    }
                })
            },
            getmore: function () {
                var self = this;
                http({
                    url: baseUrl + 'dakalist&page=' + self.page
                }).then(function (res) {
                    res = res.data;
                    if (res.ret == 0) {
                        if (res.data.length >= 10) {
                            self.showmore = true;
                        } else {
                            self.showmore = false;
                        }
                        for (var i = 0; i < res.data.length; i++) {
                            self.dakalist.push(res.data[i]);
                        }
                        self.page++;
                    } else {
                        self.showmore = false;
                    }
                })
            }
        }
    })
</script>
<style>
    .weui-media-box__title {
        overflow: visible;
        font-size: 14px;
    }
</style>